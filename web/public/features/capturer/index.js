(()=>{class e{constructor(){let e=document.createElement("canvas");e.id="capture-canvas",e.width=window.innerWidth,e.height=window.innerHeight,this.canvas=e}getScene(){let e=document.querySelector("a-scene");if(!e)throw Error("No a-scene element found in the document");return e}getVideo(){let e=document.querySelector("video");if(!e)throw Error("No video element found in the document");return e}stopVideo(e){e.pause()}captureScene(e){return e.components.screenshot.getCanvas("perspective")}drawScene(){let e=this.getScene(),t=this.captureScene(e);this.canvas.getContext("2d").drawImage(t,0,0)}drawVideo(){let e=this.getVideo();this.stopVideo(e),this.canvas.getContext("2d").drawImage(e,0,0)}capture(){this.drawVideo(),this.drawScene(),this.exportAsBlob(e=>{window.parent?.postMessage({type:"image-captured",payload:e},"*")})}appendCanvasToBody(){document.body.appendChild(this.canvas)}removeCanvasFromBody(){document.body.removeChild(this.canvas)}exportAsBlob(e){return this.canvas.toBlob(t=>{e(t)},"image/png")}}let t=document.createElement("button");t.id="capture-button",t.addEventListener("click",()=>{new e().capture()}),document.body.appendChild(t)})();